_JSVM_Namespace.runtimeEnvironment.loadModule("runtime",function(){var jsre=_JSVM_Namespace.runtimeEnvironment,JSVM=jsre.JSVM;var Exception=_JSVM_Namespace.kernel.Exception,logger=jsre.logger;JSVM.getCompiler().setParser("jsvm2",new function(){var regExp_package=/(^|\s|;|})(\s*)(package)(\s+)((\w+)(\.\w+)*)(\s*)/;var regExp_import=/(^|\s|;|})(\s*)(import)(\s+)((\w+\.)*(\w+))(\s*)/g;var regExp_class=/(^|\s|;|})(\s*)(class)(\s+)(\w*(\.\w*)*)((\s+)extends(\s+)(\w*(\.\w*)*))?(\s*)\(/;var regExp_super=/([^A-Za-z0-9_\$]+)super([^A-Za-z0-9_\$]+)/g;var regExps_strings=[/("(\\"|[^"\n\r]|(\\\r\n))*")/g,/('(\\'|[^'\n\r]|(\\\r\n))*')/g];var strings_tmpPrefix="${10b7bd2c-d345-eb59-6268-206460fc8dde";var strings_tmpSuffix="}";this.parse=function(code){var constStrs=[];var tmpStrs=code.match(regExps_strings[0]);if(tmpStrs!=null){constStrs=constStrs.concat(tmpStrs);};var tmpStrs=code.match(regExps_strings[1]);if(tmpStrs!=null){constStrs=constStrs.concat(tmpStrs);};for(var i=0;i<constStrs.length;i++){code=code.replace(constStrs[i],(strings_tmpPrefix+i+strings_tmpSuffix));};code=code.replace(regExp_package,"$1\r\n_$package(\"$5\")");var packageName=RegExp.$5;code=code.replace(regExp_import,"$1\r\nvar $7 = _$import(\"$5\")");code=code.replace(regExp_super,"$1$class.$super$2");if(regExp_class.test(code)){var className=RegExp.$5;var superName=RegExp.$7.replace(/(\s*)extends(\s+)/,"");var shortClassName=className;if(className.indexOf(".")==-1){className=packageName+"."+className;}else{shortClassName=className.replace(/\w*\./g,"");};var str="\r\nvar $class = "+className+" = function(){return $"+shortClassName+".apply(this,arguments);};\r\n"+"var "+shortClassName+" = $class;\r\n";if(superName==""){str+="$class.$extends(_JSVM_Namespace.kernel.Object);";}else{str+="$class.$extends("+superName+");";};str+="\r\nvar $"+shortClassName+" = function(";code=code.replace(regExp_class,"$1\r\n"+str);}else{throw new Exception(0x001E,"JSVM jsvm2-parser@compiler "+"error: can't found keyword 'class'.");};for(var i=0;i<constStrs.length;i++){code=code.replace((strings_tmpPrefix+i+strings_tmpSuffix),constStrs[i]);};return code;}});JSVM.setConsole(new function(){var printer=null;this.output=function(msg){if(printer==null){printer=jsre.JSVM.loadClass("js.io.WebPrinter").newInstance();printer.prompt="JSVM Console output [Version "+jsre.currentVersion+"]<br>(C) All Copyright"+" 2004-2005 JSVM Team. <br/><br/>";};printer.print(msg);};this.input=function(){return window.prompt("JSVM Console; Input: ");}});logger.log("JSVM redefine console succ.");jsre.loadModule("runtime.module",function(){var jsre=_JSVM_Namespace.runtimeEnvironment;window.Class=_JSVM_Namespace.kernel.Class;var definedClasses={};window._import=function(name){try{var clazz=jsre.JSVM.loadClass(name);var shortName=name.replace(/(.*)\./,"");if("undefined"==typeof(window[shortName])){definedClasses[shortName]=window[shortName]=clazz;}}catch(ex){ex.printStackTrace();throw ex;}};window._unimportAll=function(){for(var p in definedClasses){definedClasses[p]=window[p]=null;}};});});